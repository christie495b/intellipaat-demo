pipeline {
	agent {label "build_server"}

	stages {
		stage ("This stage will build the package") {
			steps {
				sh "mvn clean"
				sh "mvn install"
			}
		}
	}

	stage ("This stage will copy the package to the S3 bucket") {
		steps {
			sh "aws s3 cp /home/ubuntu/build_server/workspace/jenkins_pipeline_build/target/hello-world-webapp.war s3://serverless-code"
		}
	}	
}
